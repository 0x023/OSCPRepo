<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Queries</title>
</head><body>Some can only be run by admin, marked by * or -priv<br/>
<br/>
Version &#09;&#09;&#09;&#09;select versionnumber, version_timestamp from sysibm.sysversions;<br/>
Comments &#09;&#09;&#09;select blah from foo; — comment like this<br/>
Current User &#09;&#09;&#09;select user from sysibm.sysdummy1;<ul><li style="list-style-type: none"><ul><li style="list-style-type: none"><ul><li style="list-style-type: none"><ul><li style="list-style-type: none"><ul><li style="list-style-type: none">&nbsp; &nbsp;select session_user from sysibm.sysdummy1;</li>
<li style="list-style-type: none">&nbsp; &nbsp;select system_user from sysibm.sysdummy1;</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
List Users &#09;&#09;&#09;N/A (I think DB2 uses OS-level user accounts for authentication.)Database authorities (like roles, I think) can be listed like this:<ul><li style="list-style-type: none"><ul><li style="list-style-type: none"><ul><li style="list-style-type: none"><ul><li style="list-style-type: none"><ul><li style="list-style-type: none">&nbsp; &nbsp;select grantee from syscat.dbauth;</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
List Password Hashes &#09;N/A (I think DB2 uses OS-level user accounts for authentication.)<br/>
List Privileges &#09;&#09;select * from syscat.tabauth; — privs on tables<ul><li style="list-style-type: none"><ul><li style="list-style-type: none"><ul><li style="list-style-type: none"><ul><li style="list-style-type: none"><ul><li style="list-style-type: none">&nbsp; &nbsp;select * from syscat.dbauth where grantee = current user;</li>
<li style="list-style-type: none">&nbsp; &nbsp;select * from syscat.tabauth where grantee = current user;</li>
<li style="list-style-type: none">&nbsp; &nbsp;select * from SYSIBM.SYSUSERAUTH – List db2 system privilegies</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
List DBA Accounts &#09;&#09;select name from SYSIBM.SYSUSERAUTH where SYSADMAUTH = ‘Y’ or SYSADMAUTH = ‘G’<br/>
Current Database &#09;&#09;select current server from sysibm.sysdummy1;<br/>
List Databases &#09;&#09;SELECT schemaname FROM syscat.schemata;<br/>
List Columns &#09;&#09;&#09;select name, tbname, coltype from sysibm.syscolumns;<br/>
List Tables &#09;&#09;&#09;select name from sysibm.systables;<br/>
Find Tables From <br/>
Column Name &#09;&#09;select tbname from sysibm.syscolumns where name=’username’<br/>
Select Nth Row &#09;&#09;select name from (SELECT name FROM sysibm.systables order by<ul><li style="list-style-type: none"><ul><li style="list-style-type: none"><ul><li style="list-style-type: none"><ul><li style="list-style-type: none"><ul><li style="list-style-type: none">&nbsp; &nbsp;name fetch first N+M-1 rows only) sq order by name desc fetch first N rows only;</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
Select Nth Char &#09;&#09;SELECT SUBSTR(‘abc’,2,1) FROM sysibm.sysdummy1; &nbsp;— returns b<br/>
Bitwise AND &#09;&#09;&#09;This page seems to indicate that DB2 has no support for bitwise operators!<br/>
ASCII Value -&gt; Char &#09;select chr(65) from sysibm.sysdummy1; — returns ‘A’<br/>
Char -&gt; ASCII Value &#09;select ascii(‘A’) from sysibm.sysdummy1; — returns 65<br/>
Casting &#09;&#09;&#09;&#09;SELECT cast(’123′ as integer) FROM sysibm.sysdummy1;<ul><li style="list-style-type: none"><ul><li style="list-style-type: none"><ul><li style="list-style-type: none"><ul><li style="list-style-type: none"><ul><li style="list-style-type: none">&nbsp; &nbsp;SELECT cast(1 as char) FROM sysibm.sysdummy1;</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
String Concatenation &#09;SELECT ‘a’ concat ‘b’ concat ‘c’ FROM sysibm.sysdummy1; — returns ‘abc’<ul><li style="list-style-type: none"><ul><li style="list-style-type: none"><ul><li style="list-style-type: none"><ul><li style="list-style-type: none"><ul><li style="list-style-type: none">&nbsp; &nbsp;select ‘a’ || ‘b’ from sysibm.sysdummy1; — returns ‘ab’</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
If Statement &#09;&#09;&#09;TODO<br/>
Case Statement &#09;&#09;TODO<br/>
Avoiding Quotes &#09;&#09;TODO<br/>
Time Delay &#09;&#09;&#09;???See Heavy Queries article for some ideas.<br/>
Make DNS Requests &#09;TODO<br/>
Command Execution &#09;TODO<br/>
Local File Access &#09;&#09;TODO<br/>
Hostname, IP Address &#09;TODO<br/>
Location of DB files &#09;TODO<br/>
Default/System <br/>
Databases &#09;&#09;&#09;TODO</body></html>