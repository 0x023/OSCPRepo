<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>NetLogon</title>
</head><body>From <a href="https://msdn.microsoft.com/en-us/library/cc237225.aspx">MSDN</a>&nbsp;<a href="https://msdn.microsoft.com/en-us/library/cc237008.aspx">MSDN</a><br/>
The following section specifies data and state maintained by the Netlogon RPC server. It includes details about receiving Netlogon RPC methods on the server side of the client/server communication. The provided data is to facilitate the explanation of how the protocol behaves. This section does not mandate that implementations adhere to this model as long as their external behavior is consistent with that described in this document.<br/>
<br/>
This protocol MUST instruct the RPC runtime, via the strict_context_handle attribute, to reject use of context handles created by a method of a different RPC interface than this one, as specified in [MS-RPCE] section 3.<br/>
<br/>
This protocol MUST indicate to the RPC runtime that it is to perform a strict NDR data consistency check at target level 6.0, as specified in [MS-RPCE] section 3.<br/>
<br/>
Methods in RPC Opnum Order<br/>
<br/>
Method&#09;&#09;&#09;&#09;&#09;&#09;Description<br/>
NetrLogonUasLogon&#09;&#09;&#09;&#09;This method was for support of LAN Manager products, and it is no longer used. This method was introduced in LAN Manager.<ul><li style="list-style-type: none">&nbsp;&#09;&#09;&#09;&#09;&#09;&#09;Opnum: 0</li>
</ul>
NetrLogonUasLogoff&#09;&#09;&#09;&#09;This method was for support of LAN Manager products, and it is no longer used. This method was introduced in LAN Manager.<br/>
&nbsp;&#09;&#09;&#09;&#09;&#09;&#09;&#09;Opnum: 1<br/>
NetrLogonSamLogon&#09;&#09;&#09;&#09;The NetrLogonSamLogon method updates the user's lastLogon attribute for the Security Account Manager (SAM).<ul><li style="list-style-type: none">&nbsp;&#09;&#09;&#09;&#09;&#09;&#09;Opnum: 2</li>
</ul>
NetrLogonSamLogoff&#09;&#09;&#09;&#09;The NetrLogonSamLogoff method handles logoff requests for the SAM.<br/>
&nbsp;&#09;&#09;&#09;&#09;&#09;&#09;&#09;Opnum: 3<br/>
NetrServerReqChallenge&#09;&#09;&#09;The NetrServerReqChallenge method receives a client challenge and returns a server challenge.<br/>
&nbsp;&#09;&#09;&#09;&#09;&#09;&#09;&#09;Opnum: 4<br/>
NetrServerAuthenticate&#09;&#09;&#09;The NetrServerAuthenticate method authenticates an account by verifying that the computed client credentials are the same as those provided in the previous challenge.<br/>
&nbsp;&#09;&#09;&#09;&#09;&#09;&#09;&#09;Opnum: 5<br/>
NetrServerPasswordSet&#09;&#09;&#09;The NetrServerPasswordSet method sets a new password for an account in the User Account Subsystem (UAS).<br/>
&nbsp;&#09;&#09;&#09;&#09;&#09;&#09;&#09;Opnum: 6<br/>
NetrDatabaseDeltas&#09;&#09;&#09;&#09;The NetrDatabaseDeltas method returns a set of recent actions performed on the Security Account Manager (SAM) database, along with the number of times the domain has been modified.<br/>
&nbsp;&#09;&#09;&#09;&#09;&#09;&#09;&#09;Opnum: 7<br/>
NetrDatabaseSync&#09;&#09;&#09;&#09;The NetrDatabaseSync method provides an interface to synchronize a backup domain controller's Security Account Manager (SAM) database to that of the primary domain controller (PDC) by means of replication.<br/>
&nbsp;&#09;&#09;&#09;&#09;&#09;&#09;&#09;Opnum: 8<br/>
NetrAccountDeltas&#09;&#09;&#09;&#09;The NetrAccountDeltas method supported LAN Manager BDCs, and is no longer supported.<br/>
&nbsp;&#09;&#09;&#09;&#09;&#09;&#09;&#09;Opnum: 9 <br/>
NetrAccountSync&#09;&#09;&#09;&#09;The NetrAccountSync method supported LAN Manager BDCs, and is no longer supported.<br/>
&nbsp;&#09;&#09;&#09;&#09;&#09;&#09;&#09;Opnum: 10<br/>
NetrGetDCName&#09;&#09;&#09;&#09;The NetrGetDCName method retrieves the NetBIOS name of the PDC for a specified domain.<br/>
&nbsp;&#09;&#09;&#09;&#09;&#09;&#09;&#09;Opnum: 11<br/>
NetrLogonControl&#09;&#09;&#09;&#09;The NetrLogonControl method executes a specific Netlogon control operation.<br/>
&nbsp;&#09;&#09;&#09;&#09;&#09;&#09;&#09;Opnum: 12<br/>
NetrGetAnyDCName&#09;&#09;&#09;&#09;The NetrGetAnyDCName method retrieves the name of a domain controller in a specified domain.<br/>
&nbsp;&#09;&#09;&#09;&#09;&#09;&#09;&#09;Opnum: 13<br/>
NetrLogonControl2&#09;&#09;&#09;&#09;The NetrLogonControl2 method executes a specific Netlogon control operation. This method extends NetrLogonControl by allowing an input buffer that contains data for a particular query.<br/>
&nbsp;&#09;&#09;&#09;&#09;&#09;&#09;&#09;Opnum: 14<br/>
NetrServerAuthenticate2&#09;&#09;&#09;The NetrServerAuthenticate2 method handles logoff requests for the Security Account Manager (SAM).<br/>
&nbsp;&#09;&#09;&#09;&#09;&#09;&#09;&#09;Opnum: 15<br/>
NetrDatabaseSync2&#09;&#09;&#09;&#09;The NetrDatabaseSync2 method is used by a BDC to request the entire database from a PDC. It can be called only by a BDC that has been previously authenticated by the PDC.<br/>
&nbsp;&#09;&#09;&#09;&#09;&#09;&#09;&#09;Opnum: 16<br/>
NetrDatabaseRedo&#09;&#09;&#09;&#09;The NetrDatabaseRedo method is used by a SAM BDC to request information about a single account. It can be called only by a BDC that has been previously authenticated by the PDC.<br/>
&nbsp;&#09;&#09;&#09;&#09;&#09;&#09;&#09;Opnum: 17 <br/>
NetrLogonControl2Ex&#09;&#09;&#09;&#09;The NetrLogonControl2Ex method executes a specific Netlogon control operation. The introduction of this method added support for query level (4) to both NetrLogonControl2Ex and NetrLogonControl2 for retrieving user account information.<br/>
&nbsp;&#09;&#09;&#09;&#09;&#09;&#09;&#09;Opnum: 18 <br/>
NetrEnumerateTrustedDomains&#09;&#09;The NetrEnumerateTrustedDomains method returns an enumeration of trusted domain names.<br/>
&nbsp;&#09;&#09;&#09;&#09;&#09;&#09;&#09;Opnum: 19<br/>
DsrGetDcName&#09;&#09;&#09;&#09;&#09;The DsrGetDcName method returns the current domain controller for a specified domain.<br/>
&nbsp;&#09;&#09;&#09;&#09;&#09;&#09;&#09;Opnum: 20<br/>
NetrLogonGetCapabilities&#09;&#09;&#09;The NetrLogonGetCapabilities method returns server capabilities.<br/>
&nbsp;&#09;&#09;&#09;&#09;&#09;&#09;&#09;Opnum: 21<br/>
NetrLogonSetServiceBits&#09;&#09;&#09;The NetrLogonSetServiceBits method indicates to Netlogon whether a domain controller is running a specified service. This is done by setting service bits.<br/>
&nbsp;&#09;&#09;&#09;&#09;&#09;&#09;&#09;Opnum: 22<br/>
NetrLogonGetTrustRid&#09;&#09;&#09;The NetrLogonGetTrustRid method is used to obtain the RID of the account that is used by the specified server in its secure channel, to determine the DomainName for the specified domain.<br/>
&nbsp;&#09;&#09;&#09;&#09;&#09;&#09;&#09;Opnum: 23<br/>
NetrLogonComputeServerDigest&#09;&#09;The NetrLogonComputeServerDigest method computes a cryptographic digest of a message.<br/>
&nbsp;&#09;&#09;&#09;&#09;&#09;&#09;&#09;Opnum: 24<br/>
NetrLogonComputeClientDigest&#09;&#09;The NetrLogonComputeClientDigest method is used by a client to compute a cryptographic digest of a message.<br/>
&nbsp;&#09;&#09;&#09;&#09;&#09;&#09;&#09;Opnum: 25<br/>
NetrServerAuthenticate3&#09;&#09;&#09;The NetrServerAuthenticate3 method extends NetrServerAuthenticate2, returning an account RID after authentication.<br/>
&nbsp;&#09;&#09;&#09;&#09;&#09;&#09;&#09;Opnum: 26<br/>
DsrGetDcNameEx&#09;&#09;&#09;&#09;The DsrGetDcNameEx method returns the current domain controller for a specified domain and site.<br/>
&nbsp;&#09;&#09;&#09;&#09;&#09;&#09;&#09;Opnum: 27<br/>
DsrGetSiteName&#09;&#09;&#09;&#09;The DsrGetSiteName method returns the site name for a specified computer.<br/>
&nbsp;&#09;&#09;&#09;&#09;&#09;&#09;&#09;Opnum: 28<br/>
NetrLogonGetDomainInfo&#09;&#09;&#09;The NetrLogonGetDomainInfo method returns information that describes the current domain to which a specified client belongs.<br/>
&nbsp;&#09;&#09;&#09;&#09;&#09;&#09;&#09;Opnum: 29<br/>
NetrServerPasswordSet2&#09;&#09;&#09;The NetrServerPasswordSet2 method allows an account to set a new clear text password. This method extends NetrServerPasswordSet, which specifies an encrypted one-way function (OWF) of a password.<br/>
&nbsp;&#09;&#09;&#09;&#09;&#09;&#09;&#09;Opnum: 30<br/>
NetrServerPasswordGet&#09;&#09;&#09;The NetrServerPasswordGet method allows a BDC to get a computer account password from the PDC in the domain.<br/>
&nbsp;&#09;&#09;&#09;&#09;&#09;&#09;&#09;Opnum: 31<br/>
NetrLogonSendToSam&#09;&#09;&#09;The NetrLogonSendToSam method allows a BDC or RODC to forward user account password changes to the PDC.<br/>
&nbsp;&#09;&#09;&#09;&#09;&#09;&#09;&#09;Opnum: 32<br/>
DsrAddressToSiteNamesW&#09;&#09;The DsrAddressToSiteNamesW method resolves a list of socket addresses as their corresponding site names.<br/>
&nbsp;&#09;&#09;&#09;&#09;&#09;&#09;&#09;Opnum: 33<br/>
DsrGetDcNameEx2&#09;&#09;&#09;&#09;The DsrGetDcNameEx2 method returns the current DC for a specified domain and site.<br/>
&nbsp;&#09;&#09;&#09;&#09;&#09;&#09;&#09;Opnum: 34<br/>
NetrLogonGetTimeServiceParentDomain&#09;The NetrLogonGetTimeServiceParentDomain method returns the name of the parent domain of the current domain.<br/>
&nbsp;&#09;&#09;&#09;&#09;&#09;&#09;&#09;Opnum: 35<br/>
NetrEnumerateTrustedDomainsEx&#09;The NetrEnumerateTrustedDomainsEx method returns a list of trusted domains from a specified server.<br/>
&nbsp;&#09;&#09;&#09;&#09;&#09;&#09;&#09;Opnum: 36<br/>
DsrAddressToSiteNamesExW&#09;&#09;The DsrAddressToSiteNamesExW method translates a list of socket addresses into their corresponding site names and subnet names.<br/>
&nbsp;&#09;&#09;&#09;&#09;&#09;&#09;&#09;Opnum: 37<br/>
DsrGetDcSiteCoverageW&#09;&#09;&#09;The DsrGetDcSiteCoverageW method returns a list of sites covered by a DC.<br/>
&nbsp;&#09;&#09;&#09;&#09;&#09;&#09;&#09;Opnum: 38<br/>
NetrLogonSamLogonEx&#09;&#09;&#09;The NetrLogonSamLogonEx method provides an extension to NetrLogonSamLogon that allows for NT LAN Manager (NTLM) pass-through authentication.<br/>
&nbsp;&#09;&#09;&#09;&#09;&#09;&#09;&#09;Opnum: 39<br/>
DsrEnumerateDomainTrusts&#09;&#09;The DsrEnumerateDomainTrusts method returns an enumerated list of domain trusts, filtered by a set of flags, from a specified server.<br/>
&nbsp;&#09;&#09;&#09;&#09;&#09;&#09;&#09;Opnum: 40<br/>
DsrDeregisterDnsHostRecords&#09;&#09;The DsrDeregisterDnsHostRecords method deletes DNS entries, except for type A records registered by a DC.<br/>
&nbsp;&#09;&#09;&#09;&#09;&#09;&#09;&#09;Opnum: 41<br/>
NetrServerTrustPasswordsGet&#09;&#09;The NetrServerTrustPasswordsGet method returns encrypted passwords for an account on a server.<br/>
&nbsp;&#09;&#09;&#09;&#09;&#09;&#09;&#09;Opnum: 42<br/>
DsrGetForestTrustInformation&#09;&#09;The DsrGetForestTrustInformation method retrieves the trust information for the forest of the specified domain controller, or for a forest trusted by the forest of the specified DC.<br/>
&nbsp;&#09;&#09;&#09;&#09;&#09;&#09;&#09;Opnum: 43<br/>
NetrGetForestTrustInformation&#09;&#09;The NetrGetForestTrustInformation method retrieves the trust information for the forest of which the member's domain is itself a member.<br/>
&nbsp;&#09;&#09;&#09;&#09;&#09;&#09;&#09;Opnum: 44<br/>
NetrLogonSamLogonWithFlags&#09;&#09;The NetrLogonSamLogonWithFlags method handles logon requests for the SAM according to specific property flags.<br/>
&nbsp;&#09;&#09;&#09;&#09;&#09;&#09;&#09;Opnum: 45<br/>
NetrServerGetTrustInfo&#09;&#09;&#09;The NetrServerGetTrustInfo method returns an information block from a specified server. The information includes encrypted passwords for a particular account and trust data.<br/>
&nbsp;&#09;&#09;&#09;&#09;&#09;&#09;&#09;Opnum: 46<br/>
OpnumUnused47&#09;&#09;&#09;&#09;Opnum: 47<br/>
DsrUpdateReadOnlyServerDnsRecords&#09;The DsrUpdateReadOnlyServerDnsRecords method allows an RODC to send a control command to a normal (writable) DC for site-specific and CName types of DNS records update.<br/>
&nbsp;&#09;&#09;&#09;&#09;&#09;&#09;&#09;Opnum: 48<br/>
NetrChainSetClientAttributes&#09;&#09;When a read-only DC receives either the NetrServerAuthenticate3 method or the NetrLogonGetDomainInfo method, with updates requested, it invokes this method on a normal (writable) DC to update to a client's computer account object in Active Directory.<br/>
&nbsp;&#09;&#09;&#09;&#09;&#09;&#09;&#09;Opnum: 49</body></html>