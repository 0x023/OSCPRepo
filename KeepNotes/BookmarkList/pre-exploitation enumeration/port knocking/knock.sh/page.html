<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>knock.sh</title>
</head><body>#!/bin/bash<br/>
#---------------------------------------------------------------------------------#<br/>
# Name &nbsp; &nbsp; &nbsp; = Port Knocking Script &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; #<br/>
# Author &nbsp; &nbsp; = @ihack4falafel &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; #<br/>
# Date &nbsp; &nbsp; &nbsp; = 9/15/2017 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;#<br/>
# Usage &nbsp; &nbsp; &nbsp;= chmod +x PortKnokcer.sh &amp;&amp; ./PortKnocker.sh &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;#<br/>
#---------------------------------------------------------------------------------#<br/>
<br/>
# Check user input<br/>
<br/>
if ([ -z "$1" ] || [ -z "$2" ] || [ -z "$3" ] || [ -z "$4" ]); then<br/>
&nbsp; echo -e "\e[33m[*] Usage &nbsp;: \e[35m$0 &lt;port 1&gt; &lt;port 2&gt; &lt;port 3&gt; &lt;IP Address&gt;\e[33m"<br/>
&nbsp; echo -e "\e[33m[*] Example: \e[35m$0 1 2 3 192.168.199.150 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;\e[33m"<br/>
&nbsp; exit 1<br/>
fi<br/>
<br/>
# Check nmap<br/>
<br/>
if [ ! type nmap &amp;&gt; /dev/null ]; then<br/>
&nbsp; echo "\e[31m[-]\e[34m Please install nmap and rerun the script.\e[39m"<br/>
&nbsp; exit 0<br/>
fi<br/>
<br/>
# Perform port knocking <br/>
<br/>
echo -e "\e[32m[+]\e[34m Knocking the following ports $1 $2 $3 ...\e[39m"<br/>
sleep 3<br/>
<br/>
for port in $1 $2 $3; do nmap --host_timeout 100 --max-retries 0 -PN $4 3 -p $port; done &gt; /dev/null 2&gt;&amp;1<br/>
<br/>
echo -e "\e[32m[+]\e[34m Checking for new open ports with nmap ...\e[39m"<br/>
sleep 3<br/>
<br/>
nmap -sT -p- -r -n $4 --open | grep open<br/>
<br/>
</body></html>